"use strict";(function(){var n=function(n,t){return n.r===t.r&&n.g===t.g&&t.b===t.b&&t.a===t.a},t=function(n,t,i){var o=[],a=n.getImageData(t.left,t.top,t.width,t.height),h,r,s=[],v,u=a.data,c,f=0,e=0,k=t.width,l=t.height;v=u.length;for(r in i.topBottomScrollbarBorder)if(i.topBottomScrollbarBorder[r].length===t.width){c=i.topBottomScrollbarBorder[r];break}for(r in i.innerScrollbarArea)if(i.innerScrollbarArea[r].length===t.width){h=i.innerScrollbarArea[r];break}for(r=0;r<c.length;r++)o.push(window.parseColor(c[r]));for(r=0;r<h.length;r++)s.push(window.parseColor(h[r]));for(r=0;r<v;r+=4){var y=u[r+0],p=u[r+1],w=u[r+2],b=u[r+3];y=e===0||e===l-1?o[f].r:s[f].r;p=e===0||e===l-1?o[f].g:s[f].g;w=e===0||e===l-1?o[f].b:s[f].b;b=255;u[r+0]=y;u[r+1]=p;u[r+2]=w;u[r+3]=b;++f>=k&&(f=0,e++)}n.putImageData(a,t.left,t.top)};window.SWGOH||(window.SWGOH={getScreenshotFileName:function(n){var t=function(n){return(n<10?"0":"")+n};return n instanceof Date||(n=window.SWGOH.getDateFromScreenshotFileName(n)),n?"Heroes "+n.getFullYear()+"-"+t(n.getMonth()+1)+"-"+t(n.getDate())+" "+t(n.getHours())+"."+t(n.getMinutes())+"."+t(n.getSeconds())+".png":void 0},getDateFromScreenshotFileName:function(n){var t,i;if(n&&n.length)try{if((i=(t=n).lastIndexOf("."))>=0&&(t=t.substr(0,i)),t=t.split("_").pop().replace(/[^\d]/g,""),t.length===14)return new Date(t.substr(0,4),parseInt(t.substr(4,2)-1),t.substr(6,2),t.substr(8,2),t.substr(10,2),t.substr(12,2))}catch(r){}}});window.SWGOH.characterBoardCreator||(window.SWGOH.characterBoardCreator=function(){var i={get "characterArea"(){return{"960":{left:39,top:144,width:876,height:318},"1280":{left:50,top:200,width:1180,height:424},"1440":{left:32,top:200,width:1376,height:424}}},get "characterProgressBarBottomPadding"(){return 2},get "characterProgressBarHeightFactor"(){return 30},get "characterProgressBarThresholdG"(){return 112},get "characterProgressBarThresholdR"(){return 48},get "characterProgressBarStartX"(){return{"960":9,"1280":14,"1440":14}},get "characterStripHeight"(){return{"960":128,"1280":170,"1440":170}},get "innerScrollbarArea"(){return{"960":["#214858","#214a5b","#20495b","#1f4758","#1f5064","#2f89db"],"1280":["#1e4657","#1f4a5c","#1f485a","#1f495b","#1f495b","#1e3e4e","#21617e","#348ff2"],"1440":["#1e4657","#1f4a5c","#1f485a","#1f495b","#1f495b","#1e3e4e","#21617e","#348ff2"]}},get "sameStripNameAreaEqualityThreshold"(){return.05},get "scrollbarArea"(){return{"960":{left:930,top:144,width:6,height:318},"1280":{left:1240,top:192,width:8,height:424},"1440":{left:1400,top:192,width:8,height:424}}},get "scrollbarDetectColor"(){return{r:35,g:200,b:245}},get "scrollbarDetectOffsetX"(){return 2},get "scrollbarDetectOffsetY"(){return 2},get "topBottomScrollbarBorder"(){return{"960":["#2c85ca","#2d8ad3","#2d8bd4","#2d8bd3","#2d8bd7","#318ee9"],"1280":["#318ade","#3290e9","#3291ea","#3291ea","#3291ea","#3290e9","#3291ed","#338de9"],"1440":["#318ade","#3290e9","#3291ea","#3291ea","#3291ea","#3290e9","#3291ed","#338de9"]}}},r=function(n){for(var r=i.characterArea[n.width],e,s=window.HTMLCanvasElement.fromImage(n).getPixels(r.left+i.characterProgressBarStartX[n.width],0,1,n.height),u=n.height/i.characterProgressBarHeightFactor,o=[],t=r.top+i.characterStripHeight[n.width]-(u+i.characterProgressBarBottomPadding),f=n.height;t<f;t++){if(t>=r.top+r.height-u)break;(e=s[t][0]).r<=i.characterProgressBarThresholdR&&e.g>=i.characterProgressBarThresholdG&&(o.push(t),t+=2*u)}return o},u=function(t,r,u){var a=0,s,h,c,l,o=t.height-2*(u+i.characterProgressBarBottomPadding),v=t.width*u,f,e;for(s=t.getPixels?t.getPixels(0,o,t.width,u):window.HTMLCanvasElement.fromImage(t).getPixels(0,o,t.width,u),h=r.getPixels?r.getPixels(0,o,r.width,u):window.HTMLCanvasElement.fromImage(r).getPixels(0,o,r.width,u),f=0;f<u;f++)for(c=s[f],l=h[f],e=0;e<t.width;e++)if(n(c[e],l[e])&&++a/v>=i.sameStripNameAreaEqualityThreshold)return!0;return!1};return{createCharacterBoard:function(n,r,f){for(var o=[r[0]],e=i.characterArea[n.width],h=i.scrollbarArea[n.width],s=1;s<r.length;s++)u(o[o.length-1],r[s],n.height/i.characterProgressBarHeightFactor)||o.push(r[s]);window.Image.stackImages(o,function(r){var l=e.height/3,o=n.height-(e.top+2*i.characterStripHeight[n.width]),u=document.createElement("canvas"),s=u.getContext("2d"),c;for(u.width=n.width,u.height=n.height+r.height-e.height,s.drawImage(n,0,0),c=e.top;c<=u.height-o;)s.drawImage(n,0,e.top,n.width,l,0,c,n.width,l),c+=l;s.drawImage(n,0,n.height-o,n.width,o,0,u.height-o,n.width,o);t(s,{left:h.left,top:h.top,width:h.width,height:r.height},i);s.drawImage(r,e.left,e.top);u.toBlob(function(n){var t;(t=new Image).addEventListener("load",function(){f.call(this,this)});t.src=URL.createObjectURL(n)})})},getCharacterStrips:function(n,t){var u=0,e=i.characterArea[n.width],o=i.characterStripHeight[n.width],s=function(){window.Image.getFragment.call(n,e.left,h[u]+n.height/i.characterProgressBarHeightFactor+i.characterProgressBarBottomPadding-o,e.width,o,function(){f.push(this);u<h.length-1?(u++,s()):t.call(f,f)})},f=[],h=r(n);s()},findScrollbar:function(t){for(var u=i.scrollbarArea[t.width],f=window.HTMLCanvasElement.fromImage(t).getPixels(u.left+i.scrollbarDetectOffsetX,0,1,t.height),r=0,e=f.length;r<e;r++)if(n(f[r][0],i.scrollbarDetectColor))return r-(u.top+i.scrollbarDetectOffsetY)}}}());window.SWGOH.statusScreenshotCreator||(window.SWGOH.statusScreenshotCreator=function(){var n={get "detailsArea"(){return{left:396,top:96,width:516,height:342}},get "fullDetailsHeight"(){return 578},get "innerScrollbarArea"(){return["#1c4d6c","#1c506f","#1c4f6f","#1c4e6d","#1c5678","#2e8be1"]},get "removeFrom2"(){return 100},get "scrollbarArea"(){return{left:918,top:96,width:6,height:342}},get "topBottomScrollbarBorder"(){return["#2b86d1","#2c8ad9","#2c8cdb","#2c8ad9","#2c8adb","#308de9"]},get "y2Offset"(){return 236}};return{createFullDetailsImage:function(i,r,u){var f=document.createElement("canvas"),o=f.getContext("2d"),e=document.createElement("canvas"),s=e.getContext("2d"),h;e.width=n.detailsArea.width;e.height=n.fullDetailsHeight;s.drawImage(i,n.detailsArea.left,n.detailsArea.top,n.detailsArea.width,n.detailsArea.height,0,0,n.detailsArea.width,n.detailsArea.height);s.drawImage(r,n.detailsArea.left,n.detailsArea.top+n.removeFrom2,n.detailsArea.width,n.detailsArea.height-n.removeFrom2,0,n.y2Offset+n.removeFrom2,n.detailsArea.width,n.detailsArea.height-n.removeFrom2);f.width=Math.max(i.width,r.width);f.height=Math.max(i.height,r.height);o.drawImage(i,0,0);o.drawImage(e,n.detailsArea.left,n.detailsArea.top,n.detailsArea.width,n.detailsArea.height);t(o,n.scrollbarArea,n);(h=new Image).addEventListener("load",function(){u.call(this,this)});h.src=f.toDataURL()}}}())})()