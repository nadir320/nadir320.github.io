"use strict";(function(){var n=function(n,t){return n.r===t.r&&n.g===t.g&&t.b===t.b&&t.a===t.a},t=function(n,t,i){for(var o=[],c=n.getImageData(t.left,t.top,t.width,t.height),s=[],u=c.data,f=0,e=0,w=t.width,h=t.height,l=u.length,r=0;r<i.topBottomScrollbarBorder.length;r++)o.push(window.parseColor(i.topBottomScrollbarBorder[r]));for(r=0;r<i.innerScrollbarArea.length;r++)s.push(window.parseColor(i.innerScrollbarArea[r]));for(r=0;r<l;r+=4){var a=u[r+0],v=u[r+1],y=u[r+2],p=u[r+3];a=e===0||e===h-1?o[f].r:s[f].r;v=e===0||e===h-1?o[f].g:s[f].g;y=e===0||e===h-1?o[f].b:s[f].b;p=255;u[r+0]=a;u[r+1]=v;u[r+2]=y;u[r+3]=p;++f>=w&&(f=0,e++)}n.putImageData(c,t.left,t.top)};window.SWGOH||(window.SWGOH={getScreenshotFileName:function(n){var t=function(n){return(n<10?"0":"")+n};return n instanceof Date||(n=window.SWGOH.getDateFromScreenshotFileName(n)),n?"Heroes "+n.getFullYear()+"-"+t(n.getMonth()+1)+"-"+t(n.getDate())+" "+t(n.getHours())+"."+t(n.getMinutes())+"."+t(n.getSeconds())+".png":void 0},getDateFromScreenshotFileName:function(n){var t,i;if(n&&n.length)try{if((i=(t=n).lastIndexOf("."))>=0&&(t=t.substr(0,i)),t=t.split("_").pop().replace(/[^\d]/g,""),t.length===14)return new Date(t.substr(0,4),parseInt(t.substr(4,2)-1),t.substr(6,2),t.substr(8,2),t.substr(10,2),t.substr(12,2))}catch(r){}}});window.SWGOH.characterBoardCreator||(window.SWGOH.characterBoardCreator=function(){var i={get "characterArea"(){return{left:39,top:144,width:876,height:318}},get "characterProgressBarBottomPadding"(){return 2},get "characterProgressBarHeight"(){return 18},get "characterProgressBarThresholdG"(){return 112},get "characterProgressBarThresholdR"(){return 48},get "characterProgressBarStartX"(){return 9},get "characterStripHeight"(){return 128},get "innerScrollbarArea"(){return["#214858","#214a5b","#20495b","#1f4758","#1f5064","#2f89db"]},get "sameStripNameAreaEqualityThreshold"(){return.03},get "scrollbarArea"(){return{left:930,top:144,width:6,height:318}},get "scrollbarDetectColor"(){return{r:35,g:200,b:245}},get "scrollbarDetectOffsetY"(){return 146},get "scrollbarDetectX"(){return 932},get "topBottomScrollbarBorder"(){return["#2c85ca","#2d8ad3","#2d8bd4","#2d8bd3","#2d8bd7","#318ee9"]}},r=function(n){for(var u,e=window.HTMLCanvasElement.fromImage(n).getPixels(i.characterArea.left+i.characterProgressBarStartX,0,1,n.height),f=[],t=i.characterArea.top+i.characterStripHeight-(i.characterProgressBarHeight+i.characterProgressBarBottomPadding),r=n.height;t<r;t++){if(t>=i.characterArea.top+i.characterArea.height-i.characterProgressBarHeight)break;(u=e[t][0]).r<=i.characterProgressBarThresholdR&&u.g>=i.characterProgressBarThresholdG&&(f.push(t),t+=2*i.characterProgressBarHeight)}return f},u=function(t,r){var a=0,u=i.characterProgressBarHeight,s,h,c,l,o=t.height-2*(i.characterProgressBarHeight+i.characterProgressBarBottomPadding),v=t.width*u,f,e;for(s=t.getPixels?t.getPixels(0,o,t.width,u):window.HTMLCanvasElement.fromImage(t).getPixels(0,o,t.width,u),h=r.getPixels?r.getPixels(0,o,r.width,u):window.HTMLCanvasElement.fromImage(r).getPixels(0,o,r.width,u),f=0;f<u;f++)for(c=s[f],l=h[f],e=0;e<t.width;e++)if(n(c[e],l[e])&&++a/v>=i.sameStripNameAreaEqualityThreshold)return!0;return!1};return{createCharacterBoard:function(n,r,f){for(var e=[r[0]],o=1;o<r.length;o++)u(e[e.length-1],r[o])||e.push(r[o]);window.Image.stackImages(e,function(r){var h=i.characterArea.height/3,e=n.height-(i.characterArea.top+2*i.characterStripHeight),u=document.createElement("canvas"),o=u.getContext("2d"),s;for(u.width=n.width,u.height=n.height+r.height-i.characterArea.height,o.drawImage(n,0,0),s=i.characterArea.top;s<=u.height-e;)o.drawImage(n,0,i.characterArea.top,n.width,h,0,s,n.width,h),s+=h;o.drawImage(n,0,n.height-e,n.width,e,0,u.height-e,n.width,e);t(o,{left:i.scrollbarArea.left,top:i.scrollbarArea.top,width:i.scrollbarArea.width,height:r.height},i);o.drawImage(r,i.characterArea.left,i.characterArea.top);u.toBlob(function(n){var t;(t=new Image).addEventListener("load",function(){f.call(this,this)});t.src=URL.createObjectURL(n)})})},getCharacterStrips:function(n,t){var u=0,e=function(){window.Image.getFragment.call(n,i.characterArea.left,o[u]+i.characterProgressBarHeight+i.characterProgressBarBottomPadding-i.characterStripHeight,i.characterArea.width,i.characterStripHeight,function(){f.push(this);u<o.length-1?(u++,e()):t.call(f,f)})},f=[],o=r(n);e()},findScrollbar:function(t){for(var u=window.HTMLCanvasElement.fromImage(t).getPixels(i.scrollbarDetectX,0,1,t.height),r=0,f=u.length;r<f;r++)if(n(u[r][0],i.scrollbarDetectColor))return r-i.scrollbarDetectOffsetY}}}());window.SWGOH.statusScreenshotCreator||(window.SWGOH.statusScreenshotCreator=function(){var n={get "detailsArea"(){return{left:396,top:96,width:516,height:342}},get "fullDetailsHeight"(){return 578},get "innerScrollbarArea"(){return["#1c4d6c","#1c506f","#1c4f6f","#1c4e6d","#1c5678","#2e8be1"]},get "removeFrom2"(){return 100},get "scrollbarArea"(){return{left:918,top:96,width:6,height:342}},get "topBottomScrollbarBorder"(){return["#2b86d1","#2c8ad9","#2c8cdb","#2c8ad9","#2c8adb","#308de9"]},get "y2Offset"(){return 236}};return{createFullDetailsImage:function(i,r,u){var f=document.createElement("canvas"),o=f.getContext("2d"),e=document.createElement("canvas"),s=e.getContext("2d"),h;e.width=n.detailsArea.width;e.height=n.fullDetailsHeight;s.drawImage(i,n.detailsArea.left,n.detailsArea.top,n.detailsArea.width,n.detailsArea.height,0,0,n.detailsArea.width,n.detailsArea.height);s.drawImage(r,n.detailsArea.left,n.detailsArea.top+n.removeFrom2,n.detailsArea.width,n.detailsArea.height-n.removeFrom2,0,n.y2Offset+n.removeFrom2,n.detailsArea.width,n.detailsArea.height-n.removeFrom2);f.width=Math.max(i.width,r.width);f.height=Math.max(i.height,r.height);o.drawImage(i,0,0);o.drawImage(e,n.detailsArea.left,n.detailsArea.top,n.detailsArea.width,n.detailsArea.height);t(o,n.scrollbarArea,n);(h=new Image).addEventListener("load",function(){u.call(this,this)});h.src=f.toDataURL()}}}())})()