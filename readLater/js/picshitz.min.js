"use strict";$().ready(function(){var e=window.location.sameProtocol("api.allorigins.win/raw")+"?url={0}",n=window.nadir.readLater,o=window.location.get("password");n.uid=window.location.get("uid");var i=function(n){return n.match(/picshitz/gi)},t=function(t){var i=$("#list").find("ul");n.createLink(i,t,[{id:"add",click:function(n){n?$.toast.error(n.description||n.message||n):$.toast.message("Saved!")}}]);n.loadFavicons(i)},r=function(n,i){$.toast.error("Invalid page!");t({error:!0,title:"Invalid "+i,url:n})},u=function(n){return $.Deferred(function(r){window.loading(function(){return $.get(e.format(n)).then(function(n){var u={};$(document.createElement("div")).html(n.replace(/ src="/gi,' data-src="')).find(".postBody a").each(function(){var t=$(this).attr("href"),n;i(t)&&(n=f(t))&&n.length&&!u[n]&&(u[n]={title:$(this).text().replace(/Click to download/i,"").trim(),url:n})});u=Object.keys(u).map(function(n){return u[n]});u.length?(u.forEach(function(n){t(n)}),r.resolve()):($.toast.error("No link found"),r.reject())},function(n,t,i){t!=="error"||i!=="error"&&i||(i="An error occurred");$.toast.error(i||t);r.reject()})},"Loading links...")})},f=function(n){var u=n.lastIndexOf("?"),r,f;if(u>=0)for(var t=0,i=n.substr(u+1).split("&"),e=i.length;t<e;t++)if(r=i[t].indexOf("="),f=i[t].substr(0,r),f==="o")return aesCrypto.decrypt(i[t].substr(r+1),o)},s=function(){var e,o=window.location.get("url");n.uid&&n.uid.length&&(i(o)?(t({title:"Source page",url:o}),(e=f(o))&&e.length?(t({title:"Source page #2",url:e}),i(e)?u(e):r(e,"Source page #2")):u(o).fail(function(){r(o,"Source page")})):r(o,"origin ({0})".format(window.location.get("title"))))};window.loader.value(!1);s()})