"use strict";$().ready(function(){var s=window.location.sameProtocol("api.allorigins.win/raw")+"?url={0}",h="iglive.picshitz.com",r="Picshitz",c=new RegExp(r,"i"),n=window.nadir.readLater,e=window.location.get("password")||"root";n.uid=window.location.get("uid");var u=function(n){return n.match(c)},t=function(t){var u=$("#list"),i=u.find("ul"),r;i.length||(i=$(document.createElement("ul")).appendTo(u));r=[{id:"add",click:function(n){n?$.toast.error(n.description||n.message||n):$.toast.message("Saved!")}}];t.go&&(t=$.extend({},t),delete t.go,r.splice(0,0,{id:"go",url:"{0}?uid={1}&url={2}&title={3}&password={4}".format(window.location.pathname,n.uid,window.encodeURIComponent(t.url),window.encodeURIComponent(t.title),e)}));n.createLink(i,t,r);n.loadFavicons(i);l()},i=function(n,i){$.toast.error("Invalid page!");t({error:!0,title:"Invalid "+i,url:n})},f=function(n){return $.Deferred(function(i){window.loading(function(){return $.get(s.format(n)).then(function(n){var f,e=$(document.createElement("div")).html(n.replace(/ src="/gi,' data-src="')),s=e.find(".postBody a");s.length?(f={},s.each(function(){var t=$(this).attr("href"),n;u(t)&&(n=o(t))&&n.length&&!f[n]&&(f[n]={category:r,title:$(this).text().replace(/Click to download/i,"").trim(),url:n})}),f=Object.keys(f).map(function(n){return f[n]})):f=e.find(".blogPosts").find("article .postContent .postTitle a").toArray().map(function(n){return{go:!0,title:$(n).text(),url:$(n).attr("href")}});f.length?(f.forEach(function(n){t(n)}),i.resolve()):($.toast.error("No link found"),i.reject())},function(n,t,r){t!=="error"||r!=="error"&&r||(r="An error occurred");$.toast.error(r||t);i.reject()})},"Loading links...")})},o=function(n){var u=n.lastIndexOf("?"),r,f;if(u>=0)for(var t=0,i=n.substr(u+1).split("&"),o=i.length;t<o;t++)if(r=i[t].indexOf("="),f=i[t].substr(0,r),f==="o")return aesCrypto.decrypt(i[t].substr(r+1),e)},l=function(){var n=$("#list").find(".category").length;$(".header-title").text(("{0} links"+(n?" ({1})":String.empty)).format(r,n.toLocaleString()))},a=function(){var e,r=window.location.get("url"),s;n.uid&&n.uid.length&&(r&&r.length?u(r)?(t({title:"Source page",url:r}),(e=o(r))&&e.length?(t({title:"Source page #2",url:e}),u(e)?f(e):i(e,"source page #2")):f(r).fail(function(){i(r,"source page")})):i(r,"origin ({0})".format(window.location.get("title"))):(s=window.location.sameProtocol(h),t({title:"Source page",url:s}),f(s).fail(function(){i("","source page")})))};window.loader.value(!1);a()})